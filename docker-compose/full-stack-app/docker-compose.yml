version: '3'

services:
  frontend:
    # TODO => Build image from Dockerfile `PATH -> ./frontend` ğŸ“€
    # TODO => Run container after image creation ğŸ’½
    build: ./frontend
    ports:
      # TODO => outer port: 3333, inner port: 3000 -> `VALUE []` ğŸ“¡
      #! Different ports do not work if the application is run in development mode âš 
      #! When working in development mode, `websocket` is used, which causes the following error âš 
      #- '3333: 3000'
      - '3000:3000'
    # TODO => Restart the container if the process is stopped ğŸ’«
    restart: always
    volumes:
      # TODO =>  ğŸ“‚ Folder The folder that should stay in the project ğŸ“Œ
      - ./app/node_modules
      - ./frontend:/app

  backend:
    # TODO => Build image from Dockerfile `PATH -> ./backend` ğŸ“€
    # TODO => Run container after image creation ğŸ’½
    build: ./backend
    ports:
      # TODO => outer port: 5555, inner port: 5000 -> `VALUE []` ğŸ“¡
      - '5555:5000'
    # TODO => Restart the container if the process is stopped ğŸ’«
    restart: always
    depends_on:
      # TODO => Service `backend` Depends on Service `mysql` ğŸ”—
      - mysql
    volumes:
      # TODO =>  ğŸ“‚ Folder The folder that should stay in the project ğŸ“Œ
      - ./app/node_modules
      - ./backend:/app
    environment:
    # TODO => SET environment variables ğŸ³
      MYSQL_HOST: mysql
      MYSQL_USER: root
      MYSQL_PASSWORD: password
      MYSQL_PORT: '3306'
      MYSQL_DB: time_db

  mysql:
    # TODO => Run container from `mysql` image ğŸ“€
    image: mysql
    environment:
    # TODO => SET environment variables ğŸ³
      MYSQL_ROOT_PASSWORD: password
      MYSQL_DATABASE: time_db
    # TODO => Restart the container if the process is stopped ğŸ’«
    restart: always
    volumes:
      # TODO => Set Volume FROM `Docker Desktop` into container ğŸ“‚
      - mysql_data:/var/lib/mysql

  adminer:
   # TODO => Run container from `adminer` image ğŸ’½
    image: adminer
    ports:
      # TODO => outer port: 8888, inner port: 8080 -> `VALUE []` ğŸ“¡
      - '8888:8080'
    # TODO => Restart the container if the process is stopped ğŸ’«
    restart: always

volumes:
  # TODO => set volumes into `Docker Desktop` -> `linux VM` ğŸ“‚
  # TODO => volumes  -> `my_own_volume` ğŸ“‚Desktop
  mysql_data:
